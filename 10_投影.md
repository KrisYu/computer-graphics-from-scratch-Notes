# æŠ•å½±

ä¾æ—§å¦‚åŒä¹‹å‰ä¸€æ ·æ¥æ”¾ğŸ‘å’Œåæ ‡ç³»ï¼š

![](images/projection.png)


è€ƒå¯Ÿç©ºé—´ä¸­çš„ä¸€ä¸ªç‚¹Pï¼Œçœ‹å®ƒæŠ•å½±åœ¨çª—æˆ·ä¸Šçš„åº—Pâ€˜ï¼š

![](images/projection_1.png)

ç”±å›¾å¯ä»¥çœ‹å‡ºæ¥ï¼š

$$
\frac{|P'A|}{|OA|} = \frac{|PB|}{|OB|}   
$$
$$
|P'A| = \frac{|PB| \cdot |OA| }{|OB|}   
$$

æ‰€ä»¥å¯çŸ¥ï¼š

$$
P{_Y}' = \frac{P_Y \cdot d}{P_Z}   
$$


åŒç†å¯çŸ¥ï¼š

$$
P{_X}' = \frac{P_X \cdot d}{P_Z}   
$$


$$
P{_z}' = d   
$$

##  çª—æˆ·åˆ°ç”»å¸ƒ


ç„¶åçª—æˆ·åˆ°canvasçš„å˜æ¢æ˜¯ä¹‹å‰çš„ CanvasToViewport(x, y)çš„é€†å˜æ¢å§ï¼š

```
ViewportToCanvas{
	return (x * Cw/Vw, y * Ch/Vh)
}

ProjectVertex(v){
	return ViewportToCanvas(v.x * d / v.z, v.y * d / v.z)
}
```


## ç”»æ­£æ–¹ä½“

```
# The four 'front' vertexes
vAf = [-1, 1, 1]
vBf = [1, 1, 1]
vCf = [1, -1, 1]
vDf = [-1, -1, 1]

# The four 'back' vertexes
vAb = [-1, 1, 2]
vBb = [1, 1, 2]
vCb = [1, -1, 2]
vDb = [-1, -1, 2]

# The front face.
DrawLine(ProjectVertex(vAf), ProjectVertex(vBf), BLUE);
DrawLine(ProjectVertex(vBf), ProjectVertex(vCf), BLUE);
DrawLine(ProjectVertex(vCf), ProjectVertex(vDf), BLUE);
DrawLine(ProjectVertex(vDf), ProjectVertex(vAf), BLUE);


# The back face.
DrawLine(ProjectVertex(vAb), ProjectVertex(vBb), RED);
DrawLine(ProjectVertex(vBb), ProjectVertex(vCb), RED);
DrawLine(ProjectVertex(vCb), ProjectVertex(vDb), RED);
DrawLine(ProjectVertex(vDb), ProjectVertex(vAb), RED);

# The front-to-back edges.
DrawLine(ProjectVertex(vAf), ProjectVertex(vAb), GREEN);
DrawLine(ProjectVertex(vBf), ProjectVertex(vBb), GREEN);
DrawLine(ProjectVertex(vCf), ProjectVertex(vCb), GREEN);
DrawLine(ProjectVertex(vDf), ProjectVertex(vDb), GREEN);
```




## ç”»å›¾

è¿™é‡Œæˆ‘å·ä¸ªæ‡’ï¼Œå°±ç”¨PILçš„ç”»çº¿æ¥å¤„ç†äº†ï¼Œç¼©çŸ­ä»£ç é‡ o(â•¯â–¡â•°)o


![](images/raster04.png)


[é“¾æ¥](code/raster04.py)


